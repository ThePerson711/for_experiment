<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: aqua;
    }
    .btn {
      display: flex;
      justify-content: center;
      align-items: center;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: calc(1vw*45);
      width: 300px;
      aspect-ratio: 1/1;
      border-radius: 10%;
      border: solid 4px black;
      background-color: rgb(100, 59, 167);
      font-size: 48px;
    }
    .list {
      display: flex;
      justify-content: space-evenly;
      align-items: center;
      background-color: red;
      width: calc(1vw*40);
      width: 270px;
      aspect-ratio: 6/1;
      position: absolute;
      top: 50%;
      left: 50%;
      border-radius: 8px;
      transform: translate(-50%, calc(160px));
    }
    .btn_in {
      width: calc(1vw*10);
      aspect-ratio: 3/1;
      border: solid 2px gray;
      border-radius: 8px;
      background-color: rgb(163, 34, 189);
    }
    .top_lst {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 280px;
      background-color: aquamarine;
      border-radius: 14px;
      border: double 6px gray;
    }
    .top_p {
      margin: 2px;
      font-size: 20px;
    }
    .top_lst input {
      margin: 2px;
      font-size: 20px;
    }
    .top_lst button {
      width: 100px;
      height: 28px;
      border-radius: 8px;
      background-color: rgb(233, 154, 154);
      font-size: 20px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="top_lst">
    <p class="top_p">Korean</p>
    <input id="kr_inp" type="text" placeholder="Korean Word">
    <p class="top_p">Uzbek</p>
    <input id="uz_inp" type="text" placeholder="Uzbek Word">
    <button onclick="ADDWORD();">Add</button>
  </div>
  <button class="btn" id="btn">Card</button>
  <div class="list">
    <button class="btn_in" onclick="BtnClick();">Check</button>
    <button class="btn_in" onclick="sound();">Sound</button>
    <button class="btn_in" onclick="ChangeL();" id="chlan">&#x21B9; KR</button>
  </div>

  <script> 
    let ar = [
    {
        kr: `사과`,
        uz: `olma`
      },
      {
        kr: `과일`,
        uz: `meva`
      },
      {
        kr: `열매`,
        uz: `meva`
      },
      {
        kr: `배`,
        uz: `nok`
      },
      {
        kr: `포도`,
        uz: `uzum`
      },
      {
        kr: `바나나`,
        uz: `banan`
      },
      {
        kr: `체리`,
        uz: `gilos`
      },
      {
        kr: `살구`,
        uz: `o'rik`
      },
      {
        kr: `복숭아`,
        uz: `shaftoli`
      },
      {
        kr: `성유`,
        uz: `anor`
      },
      {
        kr: `무과가`,
        uz: `anjir`
      }
    ];

     ar = [];
      if(localStorage.getItem("Data_For_Voc_Kr") !== null) {
        ar = JSON.parse(localStorage.getItem("Data_For_Voc_Kr"));
      } else {
        console.log("Nothing")
      }


    let last = {
        kr: `과일`,
        uz: `meva`
      };
    let LangTo = true;
    const btn = document.getElementById("btn");

    BtnClick();

    function ADDWORD() {
      ar.push({
        kr: (document.getElementById("kr_inp").value),
        uz: (document.getElementById("uz_inp").value)
      });
      localStorage.setItem("Data_For_Voc_Kr", JSON.stringify(ar))
    }

    function ChangeL() {
      LangTo = !LangTo;
      if (LangTo) {
        document.getElementById("chlan").innerHTML = `&#x21B9; KR`;
      } else {
        document.getElementById("chlan").innerHTML = `&#x21B9; UZ`;
      }
      BtnClick();
    }

    function BtnClick() {
      btn.style.background = "green";
      if (LangTo) {
        btn.innerHTML = last.uz;
      } else {
        btn.innerHTML = last.kr;
        sound(last.kr);
      }
                                                    //  ar.length
      last = ar[((Math.ceil(Math.random()*ar.length))-1)];
      setTimeout(() => {
        btn.style.background = "rgb(100, 59, 167)";
        if (LangTo) {
        btn.innerHTML = last.kr;
        sound();
      } else {
        btn.innerHTML = last.uz;
      }
      }, 1500);
    }

    function sound() {
      TextToSpeech(last.kr, "kr");
    }


        // Converts Text to Speech {en,uz,ru,kr}
        function TextToSpeech(text_, lang_) {
      if ('speechSynthesis' in window) {
        // Create a new SpeechSynthesisUtterance object
        var utterance = new SpeechSynthesisUtterance();
        // Set the text to be spoken
        utterance.text = text_;
        // Specify Korean as the language
        if (lang_ === "kr") {
          utterance.lang = 'ko-KR';
        } else if (lang_ === "uz") {
          utterance.lang = 'uz-UZ'; // Set language to Uzbek
        } else if (lang_ === "en") {
          utterance.lang = 'en-US'; // Set language to English
        } else if (lang_ === "ru") {
          utterance.lang = 'ru-RU'; // Set language to Russian
        }
        // Speak the text
        speechSynthesis.speak(utterance);
      } else {
        // If speech synthesis is not supported, alert the user
        alert('Sorry, your browser does not support speech synthesis.');
      }
    }



  </script>
</body>
</html>